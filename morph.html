<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Particle Morph</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: radial-gradient(ellipse at center, #0f0c29 0%, #020111 100%);
  display: flex;
  justify-content: center;
  align-items: center;
}

canvas {
  cursor: pointer;
}

.info {
  position: absolute;
  bottom: 30px;
  color: rgba(255,255,255,0.4);
  font-family: 'Courier New', monospace;
  font-size: 14px;
  letter-spacing: 2px;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 0.4; }
  50% { opacity: 0.8; }
}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div class="info">CLICK TO MORPH</div>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

class Particle {
  constructor(x, y, targetX, targetY) {
    this.x = x;
    this.y = y;
    this.startX = x;
    this.startY = y;
    this.targetX = targetX;
    this.targetY = targetY;
    this.vx = 0;
    this.vy = 0;
    this.speed = 0.02 + Math.random() * 0.03;
    this.friction = 0.85;
    this.hue = Math.random() * 60 + 180;
    this.size = 2 + Math.random() * 2;
  }

  update() {
    const dx = this.targetX - this.x;
    const dy = this.targetY - this.y;
    
    this.vx += dx * this.speed;
    this.vy += dy * this.speed;
    
    this.vx *= this.friction;
    this.vy *= this.friction;
    
    this.x += this.vx;
    this.y += this.vy;
  }

  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    const dist = Math.sqrt((this.x - this.targetX) ** 2 + (this.y - this.targetY) ** 2);
    const opacity = Math.max(0.2, 1 - dist / 200);
    ctx.fillStyle = `hsla(${this.hue}, 80%, 60%, ${opacity})`;
    ctx.fill();
    
    ctx.shadowBlur = 15;
    ctx.shadowColor = `hsla(${this.hue}, 80%, 60%, 0.5)`;
  }

  setTarget(x, y) {
    this.targetX = x;
    this.targetY = y;
  }
}

const shapes = [
  (cx, cy, r) => {
    const pts = [];
    for (let i = 0; i < 150; i++) {
      const angle = (i / 150) * Math.PI * 2;
      pts.push([cx + Math.cos(angle) * r, cy + Math.sin(angle) * r]);
    }
    return pts;
  },
  (cx, cy, r) => {
    const pts = [];
    for (let i = 0; i < 150; i++) {
      const angle = (i / 150) * Math.PI * 2;
      const rad = r * (1 + 0.3 * Math.sin(angle * 5));
      pts.push([cx + Math.cos(angle) * rad, cy + Math.sin(angle) * rad]);
    }
    return pts;
  },
  (cx, cy, r) => {
    const pts = [];
    for (let i = 0; i < 150; i++) {
      const t = (i / 150) * Math.PI * 2;
      const x = cx + r * Math.cos(t) * Math.cos(t * 3);
      const y = cy + r * Math.sin(t) * Math.sin(t * 3);
      pts.push([x, y]);
    }
    return pts;
  },
  (cx, cy, r) => {
    const pts = [];
    for (let i = 0; i < 150; i++) {
      const angle = (i / 150) * Math.PI * 2;
      const k = 5;
      const rad = r * Math.abs(Math.cos(k * angle / 2));
      pts.push([cx + Math.cos(angle) * rad, cy + Math.sin(angle) * rad]);
    }
    return pts;
  }
];

let particles = [];
let shapeIdx = 0;
const cx = canvas.width / 2;
const cy = canvas.height / 2;
const r = Math.min(canvas.width, canvas.height) * 0.25;

function init() {
  const pts = shapes[shapeIdx](cx, cy, r);
  particles = pts.map(([x, y]) => {
    const angle = Math.random() * Math.PI * 2;
    const dist = 400 + Math.random() * 200;
    return new Particle(
      cx + Math.cos(angle) * dist,
      cy + Math.sin(angle) * dist,
      x, y
    );
  });
}

function morph() {
  shapeIdx = (shapeIdx + 1) % shapes.length;
  const pts = shapes[shapeIdx](cx, cy, r);
  particles.forEach((p, i) => {
    if (pts[i]) p.setTarget(pts[i][0], pts[i][1]);
  });
}

function animate() {
  ctx.fillStyle = 'rgba(2, 1, 17, 0.1)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  particles.forEach(p => {
    p.update();
    p.draw();
  });
  
  requestAnimationFrame(animate);
}

canvas.addEventListener('click', morph);

init();
animate();

setInterval(morph, 3000);

window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  init();
});
</script>
</body>
</html>